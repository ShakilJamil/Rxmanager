<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Drug Interactions</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
    <h2 class="text-2xl mb-4 font-semibold">Drug Interactions (RxNav API)</h2>
    <div id="rxnav-root"></div>
    <a href="/prescriptions" class="bg-blue-500 text-white px-4 py-2 rounded mt-4 inline-block">Back to Prescriptions</a>
</div>

<script type="text/babel">
    const { useState, useEffect } = React;

    function DrugInteractions() {
        const [interactions, setInteractions] = useState([]);

        useEffect(() => {
            fetch('/api/v1/rxnav/interaction?rxcui=34124')
                .then(response => response.json())
                .then(data => {
                    const interactionList = data.fullInteractionTypeGroup?.[0]?.fullInteractionType || [];
                    setInteractions(interactionList);
                })
                .catch(error => console.error('Error fetching interactions:', error));
        }, []);

        return (
            <div className="overflow-x-auto">
                <table className="w-full border">
                    <thead>
                        <tr className="bg-gray-200">
                            <th className="p-2 border">Drug Name</th>
                            <th className="p-2 border">Severity</th>
                            <th className="p-2 border">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        {interactions.map((item, index) => (
                            <tr key={index} className="hover:bg-gray-100">
                                <td className="p-2 border">{item.minConcept?.[0]?.name || 'N/A'}</td>
                                <td className="p-2 border">{item.interactionPair?.[0]?.severity || 'N/A'}</td>
                                <td className="p-2 border">{item.interactionPair?.[0]?.description || 'N/A'}</td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        );
    }

    ReactDOM.render(<DrugInteractions />, document.getElementById('rxnav-root'));
</script>
</body>
</html>
