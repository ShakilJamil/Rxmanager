<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Prescription List</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
<div class="container mx-auto p-4">
    <h2 class="text-2xl mb-4 font-semibold">Prescription List</h2>

    <!-- Filter Form -->
    <form th:action="@{/prescriptions}" method="get" class="mb-4">
        <div class="flex space-x-4">
            <div>
                <label for="startDate" class="block text-sm font-medium text-gray-700">Start Date</label>
                <input type="date" id="startDate" name="startDate" autocomplete="off"
                       th:value="${startDate}" class="mt-1 p-2 border rounded"/>
            </div>
            <div>
                <label for="endDate" class="block text-sm font-medium text-gray-700">End Date</label>
                <input type="date" id="endDate" name="endDate" autocomplete="off"
                       th:value="${endDate}" class="mt-1 p-2 border rounded"/>
            </div>
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded mt-6">Filter</button>
        </div>
    </form>

    <!-- Prescription Table -->
    <div class="overflow-x-auto">
        <table class="w-full border">
            <thead>
            <tr class="bg-gray-200">
                <th class="p-2 border">Date</th>
                <th class="p-2 border">Patient Name</th>
                <th class="p-2 border">Age</th>
                <th class="p-2 border">Gender</th>
                <th class="p-2 border">Diagnosis</th>
                <th class="p-2 border">Medicines</th>
                <th class="p-2 border">Next Visit</th>
                <th class="p-2 border">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="prescription : ${prescriptions}">
                <td class="p-2 border" th:text="${prescription.prescriptionDate}"></td>
                <td class="p-2 border" th:text="${prescription.patientName}"></td>
                <td class="p-2 border" th:text="${prescription.patientAge}"></td>
                <td class="p-2 border" th:text="${prescription.patientGender}"></td>
                <td class="p-2 border" th:text="${prescription.diagnosis}"></td>
                <td class="p-2 border" th:text="${prescription.medicines}"></td>
                <td class="p-2 border" th:text="${prescription.nextVisitDate}"></td>
                <td class="p-2 flex space-x-2">
                    <a th:href="@{/prescriptions/edit/{id}(id=${prescription.id})}" class="text-blue-500">Edit</a>
                    <form th:action="@{/prescriptions/delete/{id}(id=${prescription.id})}" method="post"
                          onsubmit="return confirm('Are you sure?');">
                        <button type="submit" class="text-red-500 bg-transparent border-0 cursor-pointer">Delete</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- Action Buttons -->
    <div class="mt-4">
        <a href="/prescriptions/new" class="bg-green-500 text-white px-4 py-2 rounded inline-block">Add Prescription</a>
        <a href="/report" class="bg-blue-500 text-white px-4 py-2 rounded ml-2 inline-block">View Report</a>
        <a href="/rxnav" class="bg-purple-500 text-white px-4 py-2 rounded ml-2 inline-block">View Drug Interactions</a>
    </div>
</div>
</body>
</html>
